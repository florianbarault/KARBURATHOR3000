(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{256:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(2),o=n(158),i=n(52),c=n(97),u=n(184),l=n(30),f=n(185),d=n(151),p=n(9),s=n(10),v=n(5),w=n(19),g=new JSZip;function m(e){var t;g.load(e);var n=g.file(/.kml$/i)[0];return n&&(t=n.asText()),t}function y(e){var t=e,n=window.location.href;if(n=n.slice(0,n.lastIndexOf("/")+1),0===e.indexOf(n)){var r=new RegExp(e.replace(n,"")+"$","i"),a=g.file(r)[0];a&&(t=URL.createObjectURL(new Blob([a.asArrayBuffer()])))}return t}var b=function(e){function t(t){var n=t||{};n.iconUrlFunction=y,e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getType=function(){return"arraybuffer"},t.prototype.readFeature=function(t,n){var r=m(t);return e.prototype.readFeature.call(this,r,n)},t.prototype.readFeatures=function(t,n){var r=m(t);return e.prototype.readFeatures.call(this,r,n)},t}(c.a),h=new o.a({formatConstructors:[b,u.a,l.a,f.a,c.a,d.a]}),k=new r.a({interactions:Object(i.a)().extend([h]),layers:[new v.a({source:new p.b})],target:"map",view:new a.a({center:[0,0],zoom:2})});h.on("addfeatures",(function(e){var t=new s.a({features:e.features});k.addLayer(new w.a({source:t})),k.getView().fit(t.getExtent())}));var E=function(e){var t=[];if(k.forEachFeatureAtPixel(e,(function(e){t.push(e)})),t.length>0){var n,r,a=[];for(n=0,r=t.length;n<r;++n){var o=t[n].get("description")||t[n].get("name")||t[n].get("_name")||t[n].get("layer");o&&a.push(o)}document.getElementById("info").innerHTML=a.join("<br/>")||"&nbsp"}else document.getElementById("info").innerHTML="&nbsp;"};k.on("pointermove",(function(e){if(!e.dragging){var t=k.getEventPixel(e.originalEvent);E(t)}})),k.on("click",(function(e){E(e.pixel)}));var x=document.getElementById("download");document.getElementById("download-kmz").addEventListener("click",(function(){var e;e="iceland.kmz",fetch("data/kmz/iceland.kmz").then((function(e){return e.blob()})).then((function(t){navigator.msSaveBlob?navigator.msSaveBlob(t,e):(x.href=URL.createObjectURL(t),x.download=e,x.click())}))}))}},[[256,0]]]);
//# sourceMappingURL=drag-and-drop-custom-kmz.js.map