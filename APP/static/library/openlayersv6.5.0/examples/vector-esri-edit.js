(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{389:function(e,t,r){"use strict";r.r(t);var s=r(220),a=r(3),n=r(10),o=r(2),i=r(27),c=r(66),u=r(98),l=r(145),d=r(52),p=r(19),v=r(5),f=r(55),g=r(4),m=r(132),w="https://sampleserver6.arcgisonline.com/arcgis/rest/services/Wildfire/FeatureServer/",j=new s.a,y=new n.a({loader:function(e,t,r){var s=w+"2/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+e[0]+',"ymin":'+e[1]+',"xmax":'+e[2]+',"ymax":'+e[3]+',"spatialReference":{"wkid":102100}}')+"&geometryType=esriGeometryEnvelope&inSR=102100&outFields=*&outSR=102100";$.ajax({url:s,dataType:"jsonp",success:function(e){if(e.error)alert(e.error.message+"\n"+e.error.details.join("\n"));else{var t=j.readFeatures(e,{featureProjection:r});t.length>0&&y.addFeatures(t)}}})},strategy:Object(m.c)(Object(f.b)({tileSize:512}))}),R=new p.a({source:y}),S=new v.a({source:new i.a({attributions:'Tiles Â© <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer">ArcGIS</a>',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"})}),F=new c.c({source:y,type:"Polygon"}),b=new u.a;b.setActive(!1);var h=b.getFeatures(),I=new l.a({features:h});I.setActive(!1);var A=new a.a({interactions:Object(d.a)().extend([F,b,I]),layers:[S,R],target:document.getElementById("map"),view:new o.a({center:Object(g.g)([-110.875,37.345]),zoom:5})}),O=document.getElementById("type");O.onchange=function(){F.setActive("DRAW"===O.value),b.setActive("MODIFY"===O.value),I.setActive("MODIFY"===O.value)};var x={};h.on("add",(function(e){e.element.on("change",(function(e){x[e.target.get("objectid")]=!0}))})),h.on("remove",(function(e){var t=e.element,r=t.get("objectid");if(!0===x[r]){var s="["+j.writeFeature(t,{featureProjection:A.getView().getProjection()})+"]";$.post("https://sampleserver6.arcgisonline.com/arcgis/rest/services/Wildfire/FeatureServer/2/updateFeatures",{f:"json",features:s}).done((function(e){var t="string"==typeof e?JSON.parse(e):e;if(t.updateResults&&t.updateResults.length>0)if(!0!==t.updateResults[0].success){var s=t.updateResults[0].error;alert(s.description+" ("+s.code+")")}else delete x[r]}))}})),F.on("drawend",(function(e){var t=e.feature,r="["+j.writeFeature(t,{featureProjection:A.getView().getProjection()})+"]";$.post("https://sampleserver6.arcgisonline.com/arcgis/rest/services/Wildfire/FeatureServer/2/addFeatures",{f:"json",features:r}).done((function(e){var r="string"==typeof e?JSON.parse(e):e;if(r.addResults&&r.addResults.length>0)if(!0===r.addResults[0].success)t.set("objectid",r.addResults[0].objectId);else{var s=r.addResults[0].error;alert(s.description+" ("+s.code+")")}}))}))}},[[389,0]]]);
//# sourceMappingURL=vector-esri-edit.js.map